<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Google ve DiÄŸer Siteler Ä°Ã§in Referrer Policy -->
    <meta name="referrer" content="no-referrer">
    <title>Via Stili TarayÄ±cÄ± Pro</title>
    
    <!-- Ä°konlar -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* --- TEMEL AYARLAR --- */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; -webkit-tap-highlight-color: transparent; }
        body { background-color: #000000; color: #ffffff; height: 100vh; overflow: hidden; display: flex; flex-direction: column; position: relative; }

        /* --- 1. ANA EKRAN --- */
        #home-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000000; display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 50;
            transition: opacity 0.3s ease, transform 0.3s ease; padding-bottom: 100px;
        }
        #home-screen.hidden { opacity: 0; pointer-events: none; transform: scale(1.1); }

        .logo { font-size: 40px; font-weight: 700; margin-bottom: 30px; letter-spacing: -1px; }
        .logo span { color: #3b82f6; }

        .home-search-box {
            width: 90%; max-width: 400px; position: relative;
            background: #1e1e1e; border-radius: 25px; height: 50px;
            display: flex; align-items: center; padding: 0 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5); border: 1px solid #333;
        }
        .home-search-box input {
            flex: 1; background: none; border: none; color: white; font-size: 16px; outline: none;
        }
        .home-shortcuts {
            display: flex; gap: 20px; margin-top: 30px;
        }
        .shortcut-item {
            display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer;
        }
        .shortcut-icon {
            width: 50px; height: 50px; background: #1e1e1e; border-radius: 15px;
            display: flex; align-items: center; justify-content: center; font-size: 20px;
            border: 1px solid #333; transition: transform 0.2s;
        }
        .shortcut-icon:active { transform: scale(0.9); }
        .shortcut-name { font-size: 12px; color: #888; }

        /* --- 2. TARAYICI EKRANI --- */
        #browser-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; z-index: 40;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        #browser-screen.active { opacity: 1; pointer-events: auto; }

        /* Ãœst Bar */
        .top-bar {
            height: 50px; background: #1e1e1e; border-bottom: 1px solid #333;
            display: flex; align-items: center; padding: 0 10px; justify-content: space-between;
        }
        .url-display {
            font-size: 13px; color: #aaa; flex: 1; text-align: center;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding: 0 10px;
        }

        /* Web AlanÄ± */
        .web-container { flex: 1; position: relative; background: white; }
        iframe { width: 100%; height: 100%; border: none; }
        .loading-bar {
            position: absolute; top: 0; left: 0; height: 3px; background: #3b82f6; width: 0%; z-index: 10; transition: width 0.3s, opacity 0.3s;
        }

        /* Alt Bar */
        .bottom-bar {
            height: 50px; background: #1e1e1e; border-top: 1px solid #333;
            display: flex; align-items: center; justify-content: space-around;
        }
        .nav-btn {
            background: none; border: none; color: #fff; padding: 10px;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
        }
        .nav-btn:active { color: #888; }
        .menu-badge {
            position: absolute; top: 5px; right: 5px; width: 8px; height: 8px;
            background: #ef4444; border-radius: 50%;
        }

        /* --- 3. MENÃœLER (BOTTOM SHEET) --- */
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 100;
            opacity: 0; pointer-events: none; transition: opacity 0.3s;
            backdrop-filter: blur(5px);
        }
        .modal-overlay.active { opacity: 1; pointer-events: auto; }

        .bottom-sheet {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: #1e1e1e; border-top-left-radius: 20px; border-top-right-radius: 20px;
            padding: 20px; transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.1, 0.7, 0.1, 1);
            z-index: 110; border-top: 1px solid #333;
        }
        .bottom-sheet.open { transform: translateY(0); }

        .sheet-handle {
            width: 40px; height: 4px; background: #444; border-radius: 2px;
            margin: 0 auto 20px auto;
        }

        .menu-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; text-align: center;
        }
        .menu-item {
            display: flex; flex-direction: column; align-items: center; gap: 8px; color: #fff;
        }
        .menu-icon-box {
            width: 50px; height: 50px; background: #2c2c2c; border-radius: 12px;
            display: flex; align-items: center; justify-content: center; font-size: 20px;
        }
        .menu-label { font-size: 11px; color: #888; }

        /* --- 4. DÄ°L MATKABI (YAN MENÃœ) --- */
        #drill-sidebar {
            position: fixed; top: 0; left: 0; width: 85%; height: 100%;
            background: #121212; z-index: 120;
            transform: translateX(-100%); transition: transform 0.3s;
            border-right: 1px solid #333; display: flex; flex-direction: column;
        }
        #drill-sidebar.open { transform: translateX(0); }
        .sidebar-header {
            padding: 15px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center;
        }
        .drill-area { flex: 1; padding: 15px; }
        .drill-input {
            width: 100%; height: 150px; background: #1e1e1e; border: 1px solid #333;
            border-radius: 10px; color: white; padding: 10px; resize: none; margin-bottom: 10px;
        }
        .action-btn {
            width: 100%; padding: 12px; background: #3b82f6; color: white; border: none;
            border-radius: 10px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
        }

        /* --- HATA EKRANI --- */
        #error-overlay {
            position: absolute; inset: 0; background: #121212; z-index: 5;
            display: none; flex-direction: column; align-items: center; justify-content: center; text-align: center;
        }
        #error-overlay.show { display: flex; }

    </style>
</head>
<body>

    <!-- 1. GÄ°RÄ°Åž EKRANI -->
    <div id="home-screen">
        <div class="logo">Via<span>Pro</span></div>
        <div class="home-search-box">
            <input type="text" id="home-input" placeholder="Ara veya URL yaz..." autocomplete="off">
            <i data-lucide="search" color="#888"></i>
        </div>
        <div class="home-shortcuts">
            <div class="shortcut-item" onclick="navigate('google.com')">
                <div class="shortcut-icon" style="color:#4285F4;"><i data-lucide="search"></i></div>
                <span class="shortcut-name">Google</span>
            </div>
            <div class="shortcut-item" onclick="navigate('youtube.com')">
                <div class="shortcut-icon" style="color:#FF0000;"><i data-lucide="youtube"></i></div>
                <span class="shortcut-name">YouTube</span>
            </div>
            <div class="shortcut-item" onclick="navigate('tr.wikipedia.org')">
                <div class="shortcut-icon" style="color:#fff;"><i data-lucide="book"></i></div>
                <span class="shortcut-name">Wiki</span>
            </div>
            <div class="shortcut-item" onclick="toggleBookmarks()">
                <div class="shortcut-icon" style="color:#FBBF24;"><i data-lucide="star"></i></div>
                <span class="shortcut-name">Favoriler</span>
            </div>
        </div>
    </div>

    <!-- 2. TARAYICI EKRANI -->
    <div id="browser-screen">
        <div class="top-bar">
            <button class="nav-btn" onclick="toggleDrill()"><i data-lucide="brain-circuit" color="#3b82f6"></i></button>
            <div class="url-display" id="url-text" onclick="goHome()">google.com</div>
            <button class="nav-btn" onclick="reload()"><i data-lucide="rotate-cw" size="18"></i></button>
        </div>

        <div class="web-container">
            <div class="loading-bar" id="loader"></div>
            
            <div id="error-overlay">
                <i data-lucide="shield-alert" size="48" color="#ef4444" style="margin-bottom:10px;"></i>
                <p style="color:#888; font-size:14px; margin-bottom:20px;">Site Ã¶nizleme modunda aÃ§Ä±lamÄ±yor.</p>
                <button class="action-btn" onclick="openFull()" style="width:auto; padding:10px 20px;">Tam Ekran AÃ§ â†—</button>
            </div>

            <iframe id="webview" src="" sandbox="allow-forms allow-scripts allow-same-origin allow-popups allow-top-navigation allow-presentation"></iframe>
        </div>

        <div class="bottom-bar">
            <button class="nav-btn" onclick="historyBack()"><i data-lucide="chevron-left"></i></button>
            <button class="nav-btn" onclick="historyForward()"><i data-lucide="chevron-right"></i></button>
            <button class="nav-btn" onclick="goHome()" style="background:#2c2c2c; border-radius:50%; width:35px; height:35px;"><i data-lucide="home" size="18"></i></button>
            <button class="nav-btn" onclick="addBookmark()"><i data-lucide="star"></i></button>
            <button class="nav-btn" onclick="toggleMenu()"><i data-lucide="menu"></i></button>
        </div>
    </div>

    <!-- 3. MENÃœ (BOTTOM SHEET) -->
    <div class="modal-overlay" onclick="closeModals()"></div>
    
    <div class="bottom-sheet" id="main-menu">
        <div class="sheet-handle"></div>
        <div class="menu-grid">
            <div class="menu-item" onclick="toggleDrill(); closeModals();">
                <div class="menu-icon-box" style="color:#3b82f6;"><i data-lucide="brain-circuit"></i></div>
                <span class="menu-label">Matkap</span>
            </div>
            <div class="menu-item" onclick="addBookmark(); closeModals();">
                <div class="menu-icon-box"><i data-lucide="bookmark-plus"></i></div>
                <span class="menu-label">Kaydet</span>
            </div>
            <div class="menu-item" onclick="shareUrl(); closeModals();">
                <div class="menu-icon-box"><i data-lucide="share-2"></i></div>
                <span class="menu-label">PaylaÅŸ</span>
            </div>
            <div class="menu-item" onclick="openFull(); closeModals();">
                <div class="menu-icon-box"><i data-lucide="external-link"></i></div>
                <span class="menu-label">DÄ±ÅŸarÄ±da AÃ§</span>
            </div>
        </div>
    </div>

    <!-- 4. FAVORÄ°LER MENÃœSÃœ -->
    <div class="bottom-sheet" id="bookmarks-menu" style="height:50vh;">
        <div class="sheet-handle"></div>
        <h3 style="text-align:center; margin-bottom:20px; font-size:16px;">Favoriler</h3>
        <div id="bookmarks-list" style="overflow-y:auto; max-height:calc(100% - 50px); display:flex; flex-direction:column; gap:10px;">
            <!-- JS ile dolacak -->
        </div>
    </div>

    <!-- 5. DÄ°L MATKABI (YAN MENÃœ) -->
    <div id="drill-sidebar">
        <div class="sidebar-header">
            <span style="font-weight:700;">Dil MatkabÄ± ðŸ§ </span>
            <button class="nav-btn" onclick="toggleDrill()"><i data-lucide="x"></i></button>
        </div>
        <div class="drill-area">
            <textarea class="drill-input" id="drill-text" placeholder="CÃ¼mleyi yapÄ±ÅŸtÄ±r..."></textarea>
            <button class="action-btn" onclick="speak()">
                <i data-lucide="volume-2"></i> Seslendir
            </button>
            <div style="margin-top:20px; text-align:center; font-size:12px; color:#666;">
                Otomatik Dil AlgÄ±lama: JP / RU / AR / DE / ES
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        // Elemanlar
        const homeScreen = document.getElementById('home-screen');
        const browserScreen = document.getElementById('browser-screen');
        const iframe = document.getElementById('webview');
        const urlText = document.getElementById('url-text');
        const homeInput = document.getElementById('home-input');
        const loader = document.getElementById('loader');
        const errorOverlay = document.getElementById('error-overlay');
        const overlay = document.querySelector('.modal-overlay');
        
        let bookmarks = JSON.parse(localStorage.getItem('my_bookmarks')) || [];

        // --- TARAYICI MOTORU ---
        function navigate(query) {
            let url = query.trim();
            if(!url) return;

            // YouTube Fix
            if(url.match(/(youtube\.com|youtu\.be)/)) {
                let v = url.split('v=')[1]?.split('&')[0] || url.split('/').pop();
                url = `https://www.youtube.com/embed/${v}?autoplay=1`;
            }
            // Google Arama
            else if(!url.includes('.')) {
                url = `https://www.google.com/search?igu=1&q=${encodeURIComponent(url)}`;
            }
            // URL DÃ¼zenleme
            else if(!url.startsWith('http')) {
                url = 'https://' + url;
            }

            // ArayÃ¼z GeÃ§iÅŸi
            homeScreen.classList.add('hidden');
            browserScreen.classList.add('active');
            errorOverlay.classList.remove('show');
            
            // YÃ¼kleme
            startLoading();
            iframe.src = url;
            urlText.textContent = url.replace('https://','').replace('www.','').split('/')[0];
            
            // Input Temizle
            homeInput.value = "";
            homeInput.blur();
        }

        // --- YÃœKLEME BAR ---
        function startLoading() {
            loader.style.width = "70%"; loader.style.opacity = "1";
            setTimeout(() => { if(loader.style.opacity==="1") {} }, 4000); // Timeout kontrolÃ¼
        }
        iframe.onload = () => {
            loader.style.width = "100%";
            setTimeout(() => { loader.style.opacity="0"; loader.style.width="0%"; }, 300);
        };
        iframe.onerror = () => errorOverlay.classList.add('show');

        // --- NAVÄ°GASYON ---
        function historyBack() { try { iframe.contentWindow.history.back(); } catch(e){} }
        function historyForward() { try { iframe.contentWindow.history.forward(); } catch(e){} }
        function reload() { iframe.src = iframe.src; startLoading(); }
        function goHome() {
            browserScreen.classList.remove('active');
            homeScreen.classList.remove('hidden');
            iframe.src = "";
            urlText.textContent = "";
        }
        function openFull() { window.open(iframe.src, '_blank'); }
        function shareUrl() { navigator.clipboard.writeText(iframe.src); alert("Link KopyalandÄ±"); }

        // --- MENÃœLER ---
        function closeModals() {
            overlay.classList.remove('active');
            document.getElementById('main-menu').classList.remove('open');
            document.getElementById('bookmarks-menu').classList.remove('open');
            document.getElementById('drill-sidebar').classList.remove('open');
        }
        function toggleMenu() {
            closeModals();
            overlay.classList.add('active');
            document.getElementById('main-menu').classList.add('open');
        }
        function toggleDrill() {
            closeModals();
            overlay.classList.add('active');
            document.getElementById('drill-sidebar').classList.add('open');
        }
        function toggleBookmarks() {
            renderBookmarks();
            closeModals();
            overlay.classList.add('active');
            document.getElementById('bookmarks-menu').classList.add('open');
        }

        // --- MATKAP (SES) ---
        function speak() {
            let txt = document.getElementById('drill-text').value;
            if(!txt) return;
            window.speechSynthesis.cancel();
            let u = new SpeechSynthesisUtterance(txt);
            if(txt.match(/[\u3000-\u309f]/)) u.lang='ja-JP';
            else if(txt.match(/[\u0400-\u04FF]/)) u.lang='ru-RU';
            else if(txt.match(/[\u0600-\u06FF]/)) u.lang='ar-SA';
            else if(txt.match(/[Â¿Â¡Ã±Ã¡Ã©Ã­Ã³Ãº]/)) u.lang='es-ES';
            else u.lang='de-DE';
            window.speechSynthesis.speak(u);
        }

        // --- FAVORÄ°LER ---
        function addBookmark() {
            if(!iframe.src) {
                // EÄŸer ana sayfadaysak inputtaki deÄŸeri kaydet (basit mantÄ±k)
                let val = document.getElementById('urlInput') ? document.getElementById('urlInput').value : "Yeni Site";
                if(val) bookmarks.push({title: val, url: val});
                else return;
            } else {
                bookmarks.push({ title: urlText.textContent, url: iframe.src });
            }
            localStorage.setItem('my_bookmarks', JSON.stringify(bookmarks));
            alert("Favorilere Eklendi!");
        }

        function renderBookmarks() {
            const list = document.getElementById('bookmarks-list');
            list.innerHTML = "";
            if(bookmarks.length === 0) {
                list.innerHTML = '<div style="text-align:center; color:#666; padding:20px;">HenÃ¼z favori yok</div>';
                return;
            }
            bookmarks.forEach(bk => {
                const item = document.createElement('div');
                item.style.cssText = "padding:15px; background:#2c2c2c; border-radius:10px; cursor:pointer; display:flex; align-items:center; gap:10px;";
                item.innerHTML = `<i data-lucide="globe" size="16" color="#888"></i> <span style="font-size:14px;">${bk.title}</span>`;
                item.onclick = () => { navigate(bk.url); closeModals(); };
                list.appendChild(item);
            });
            lucide.createIcons();
        }

        // --- INPUT ---
        homeInput.addEventListener('keydown', (e) => { if(e.key === 'Enter') navigate(homeInput.value); });
        
        // BaÅŸlangÄ±Ã§ta boÅŸ
        renderBookmarks();

    </script>
</body>
</html>
